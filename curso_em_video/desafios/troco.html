<!DOCTYPE html>
<html lang="pt-br">

<head>
    <!-- https://github.com/gustavoguanabara/javascript -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D4</title>
</head>

<style>
    body {
        background-color: #312d2d;
        font: normal 14pt Arial;
        text-align: center;
    }

    h1 {
        color: #fffafb;
    }

    button {
        width: 160px;
        height: 60px;
        color: #ffffff;
        background: #38045c;
    }
</style>

<body>
    <h1>Calculando o Troco</h1>

    <button onclick="desafio4()">Comprar produto</button>

    <script>
        function desafio4() {

            var produto = window.prompt('Que produto você está comprando?');

            if (produto !== null && produto !== '') {

                var valorProduto = window.prompt(`Quanto custa ${produto} que você está comprando?`);
                valorProduto = parseFloat(valorProduto.replace(',', '.'));

                if (!isNaN(valorProduto) && valorProduto > 0) {
                    var valorPago = window.prompt(`Qual foi o valor que você deu para pagar ${produto}`);
                    valorPago = parseFloat(valorPago.replace(',', '.'));

                    if (!isNaN(valorPago) && valorPago >= valorProduto) {
                        var troco = valorPago - valorProduto;

                        window.confirm(`Você comprou ${produto} que custou R$${valorProduto.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}.\nDeu R$${valorPago.toLocaleString('pt-BR', { minimumFractionDigits: 2 })} em dinheiro e vai receber R$${troco.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}.\nVolte sempre!`)
                    } else {
                        window.alert('Digite um valor suficiente para que consiga comprar o produto desejado!')
                    }
                } else {
                    window.alert('Digite um preço válido!')
                }
            } else {
                window.alert('Digite o nome do produto')
            }
        }
    </script>

</body>

</html>
